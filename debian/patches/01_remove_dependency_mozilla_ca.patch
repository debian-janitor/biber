Description: remove requirement for Mozilla::CA, Debian has ca-certificates
Origin: vendor
Forwarded: not-needed
Author: Danai SAE-HAN (韓達耐)
Reviewed-by: gregor herrmann <gregoa@debian.org>
Last-Update: 2012-06-05

---
 lib/Biber/Input/file/biblatexml.pm   |    6 +-----
 lib/Biber/Input/file/bibtex.pm       |    6 +-----
 lib/Biber/Input/file/endnotexml.pm   |    6 +-----
 lib/Biber/Input/file/ris.pm          |    6 +-----
 lib/Biber/Input/file/zoterordfxml.pm |    6 +-----
 5 files changed, 5 insertions(+), 25 deletions(-)

--- biber-norb.git.orig/lib/Biber/Input/file/biblatexml.pm
+++ biber-norb.git/lib/Biber/Input/file/biblatexml.pm
@@ -97,11 +97,7 @@
       # can't find the .pem when PAR::Packer'ed
       if (not exists($ENV{PERL_LWP_SSL_CA_FILE}) and
           not defined(Biber::Config->getoption('ssl-nointernalca'))) {
-        require Mozilla::CA; # Have to explicitly require this here to get it into %INC below
-        # we assume that the default CA file is in .../Mozilla/CA/cacert.pem
-        (my $vol, my $dir, undef) = File::Spec->splitpath( $INC{"Mozilla/CA.pm"} );
-        $dir =~ s/\/$//; # splitpath sometimes leaves a trailing '/'
-        $ENV{PERL_LWP_SSL_CA_FILE} = File::Spec->catpath($vol, "$dir/CA", 'cacert.pem');
+        $ENV{PERL_LWP_SSL_CA_FILE} = '/etc/ssl/certs/ca-certificates.crt';
       }
       if (defined(Biber::Config->getoption('ssl-noverify-host'))) {
           $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
--- biber-norb.git.orig/lib/Biber/Input/file/endnotexml.pm
+++ biber-norb.git/lib/Biber/Input/file/endnotexml.pm
@@ -116,11 +116,7 @@
       # can't find the .pem when PAR::Packer'ed
       if (not exists($ENV{PERL_LWP_SSL_CA_FILE}) and
           not defined(Biber::Config->getoption('ssl-nointernalca'))) {
-        require Mozilla::CA; # Have to explicitly require this here to get it into %INC below
-        # we assume that the default CA file is in .../Mozilla/CA/cacert.pem
-        (my $vol, my $dir, undef) = File::Spec->splitpath( $INC{"Mozilla/CA.pm"} );
-        $dir =~ s/\/$//; # splitpath sometimes leaves a trailing '/'
-        $ENV{PERL_LWP_SSL_CA_FILE} = File::Spec->catpath($vol, "$dir/CA", 'cacert.pem');
+        $ENV{PERL_LWP_SSL_CA_FILE} = '/etc/ssl/certs/ca-certificates.crt';
       }
       if (defined(Biber::Config->getoption('ssl-noverify-host'))) {
           $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
--- biber-norb.git.orig/lib/Biber/Input/file/ris.pm
+++ biber-norb.git/lib/Biber/Input/file/ris.pm
@@ -111,11 +111,7 @@
       # can't find the .pem when PAR::Packer'ed
       if (not exists($ENV{PERL_LWP_SSL_CA_FILE}) and
           not defined(Biber::Config->getoption('ssl-nointernalca'))) {
-        require Mozilla::CA; # Have to explicitly require this here to get it into %INC below
-        # we assume that the default CA file is in .../Mozilla/CA/cacert.pem
-        (my $vol, my $dir, undef) = File::Spec->splitpath( $INC{"Mozilla/CA.pm"} );
-        $dir =~ s/\/$//; # splitpath sometimes leaves a trailing '/'
-        $ENV{PERL_LWP_SSL_CA_FILE} = File::Spec->catpath($vol, "$dir/CA", 'cacert.pem');
+	  $ENV{PERL_LWP_SSL_CA_FILE} = '/etc/ssl/certs/ca-certificates.crt';
       }
       if (defined(Biber::Config->getoption('ssl-noverify-host'))) {
           $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
--- biber-norb.git.orig/lib/Biber/Input/file/zoterordfxml.pm
+++ biber-norb.git/lib/Biber/Input/file/zoterordfxml.pm
@@ -127,11 +127,7 @@
       # can't find the .pem when PAR::Packer'ed
       if (not exists($ENV{PERL_LWP_SSL_CA_FILE}) and
           not defined(Biber::Config->getoption('ssl-nointernalca'))) {
-        require Mozilla::CA; # Have to explicitly require this here to get it into %INC below
-        # we assume that the default CA file is in .../Mozilla/CA/cacert.pem
-        (my $vol, my $dir, undef) = File::Spec->splitpath( $INC{"Mozilla/CA.pm"} );
-        $dir =~ s/\/$//; # splitpath sometimes leaves a trailing '/'
-        $ENV{PERL_LWP_SSL_CA_FILE} = File::Spec->catpath($vol, "$dir/CA", 'cacert.pem');
+        $ENV{PERL_LWP_SSL_CA_FILE} = '/etc/ssl/certs/ca-certificates.crt';
       }
       if (defined(Biber::Config->getoption('ssl-noverify-host'))) {
           $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
--- biber-norb.git.orig/lib/Biber/Input/file/bibtex.pm
+++ biber-norb.git/lib/Biber/Input/file/bibtex.pm
@@ -138,11 +138,7 @@
       # can't find the .pem when PAR::Packer'ed
       if (not exists($ENV{PERL_LWP_SSL_CA_FILE}) and
           not defined(Biber::Config->getoption('ssl-nointernalca'))) {
-        require Mozilla::CA; # Have to explicitly require this here to get it into %INC below
-        # we assume that the default CA file is in .../Mozilla/CA/cacert.pem
-        (my $vol, my $dir, undef) = File::Spec->splitpath( $INC{"Mozilla/CA.pm"} );
-        $dir =~ s/\/$//; # splitpath sometimes leaves a trailing '/'
-        $ENV{PERL_LWP_SSL_CA_FILE} = File::Spec->catpath($vol, "$dir/CA", 'cacert.pem');
+	  $ENV{PERL_LWP_SSL_CA_FILE} = '/etc/ssl/certs/ca-certificates.crt';
       }
       if (defined(Biber::Config->getoption('ssl-noverify-host'))) {
           $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
