Description: remove requirement for Mozilla::CA, Debian has ca-certificates
Origin: vendor
Forwarded: not-needed
Author: Danai SAE-HAN (韓達耐)
Reviewed-by: gregor herrmann <gregoa@debian.org>
Last-Update: 2012-06-05

--- a/lib/Biber/Input/file/biblatexml.pm
+++ b/lib/Biber/Input/file/biblatexml.pm
@@ -123,11 +123,7 @@ sub extract_entries {
       # can't find the .pem when PAR::Packer'ed
       if (not exists($ENV{PERL_LWP_SSL_CA_FILE}) and
           not defined(Biber::Config->getoption('ssl-nointernalca'))) {
-        require Mozilla::CA; # Have to explicitly require this here to get it into %INC below
-        # we assume that the default CA file is in .../Mozilla/CA/cacert.pem
-        (my $vol, my $dir, undef) = File::Spec->splitpath( $INC{"Mozilla/CA.pm"} );
-        $dir =~ s/\/$//; # splitpath sometimes leaves a trailing '/'
-        $ENV{PERL_LWP_SSL_CA_FILE} = File::Spec->catpath($vol, "$dir/CA", 'cacert.pem');
+        $ENV{PERL_LWP_SSL_CA_FILE} = '/etc/ssl/certs/ca-certificates.crt';
       }
       if (defined(Biber::Config->getoption('ssl-noverify-host'))) {
           $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
--- a/lib/Biber/Input/file/endnotexml.pm
+++ b/lib/Biber/Input/file/endnotexml.pm
@@ -138,11 +138,7 @@ sub extract_entries {
       # can't find the .pem when PAR::Packer'ed
       if (not exists($ENV{PERL_LWP_SSL_CA_FILE}) and
           not defined(Biber::Config->getoption('ssl-nointernalca'))) {
-        require Mozilla::CA; # Have to explicitly require this here to get it into %INC below
-        # we assume that the default CA file is in .../Mozilla/CA/cacert.pem
-        (my $vol, my $dir, undef) = File::Spec->splitpath( $INC{"Mozilla/CA.pm"} );
-        $dir =~ s/\/$//; # splitpath sometimes leaves a trailing '/'
-        $ENV{PERL_LWP_SSL_CA_FILE} = File::Spec->catpath($vol, "$dir/CA", 'cacert.pem');
+        $ENV{PERL_LWP_SSL_CA_FILE} = '/etc/ssl/certs/ca-certificates.crt';
       }
       if (defined(Biber::Config->getoption('ssl-noverify-host'))) {
           $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
--- a/lib/Biber/Input/file/ris.pm
+++ b/lib/Biber/Input/file/ris.pm
@@ -133,11 +133,7 @@ sub extract_entries {
       # can't find the .pem when PAR::Packer'ed
       if (not exists($ENV{PERL_LWP_SSL_CA_FILE}) and
           not defined(Biber::Config->getoption('ssl-nointernalca'))) {
-        require Mozilla::CA; # Have to explicitly require this here to get it into %INC below
-        # we assume that the default CA file is in .../Mozilla/CA/cacert.pem
-        (my $vol, my $dir, undef) = File::Spec->splitpath( $INC{"Mozilla/CA.pm"} );
-        $dir =~ s/\/$//; # splitpath sometimes leaves a trailing '/'
-        $ENV{PERL_LWP_SSL_CA_FILE} = File::Spec->catpath($vol, "$dir/CA", 'cacert.pem');
+	  $ENV{PERL_LWP_SSL_CA_FILE} = '/etc/ssl/certs/ca-certificates.crt';
       }
       if (defined(Biber::Config->getoption('ssl-noverify-host'))) {
           $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
--- a/lib/Biber/Input/file/zoterordfxml.pm
+++ b/lib/Biber/Input/file/zoterordfxml.pm
@@ -149,11 +149,7 @@ sub extract_entries {
       # can't find the .pem when PAR::Packer'ed
       if (not exists($ENV{PERL_LWP_SSL_CA_FILE}) and
           not defined(Biber::Config->getoption('ssl-nointernalca'))) {
-        require Mozilla::CA; # Have to explicitly require this here to get it into %INC below
-        # we assume that the default CA file is in .../Mozilla/CA/cacert.pem
-        (my $vol, my $dir, undef) = File::Spec->splitpath( $INC{"Mozilla/CA.pm"} );
-        $dir =~ s/\/$//; # splitpath sometimes leaves a trailing '/'
-        $ENV{PERL_LWP_SSL_CA_FILE} = File::Spec->catpath($vol, "$dir/CA", 'cacert.pem');
+        $ENV{PERL_LWP_SSL_CA_FILE} = '/etc/ssl/certs/ca-certificates.crt';
       }
       if (defined(Biber::Config->getoption('ssl-noverify-host'))) {
           $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
--- a/lib/Biber/Input/file/bibtex.pm
+++ b/lib/Biber/Input/file/bibtex.pm
@@ -160,11 +160,7 @@ sub extract_entries {
       # can't find the .pem when PAR::Packer'ed
       if (not exists($ENV{PERL_LWP_SSL_CA_FILE}) and
           not defined(Biber::Config->getoption('ssl-nointernalca'))) {
-        require Mozilla::CA; # Have to explicitly require this here to get it into %INC below
-        # we assume that the default CA file is in .../Mozilla/CA/cacert.pem
-        (my $vol, my $dir, undef) = File::Spec->splitpath( $INC{"Mozilla/CA.pm"} );
-        $dir =~ s/\/$//; # splitpath sometimes leaves a trailing '/'
-        $ENV{PERL_LWP_SSL_CA_FILE} = File::Spec->catpath($vol, "$dir/CA", 'cacert.pem');
+	  $ENV{PERL_LWP_SSL_CA_FILE} = '/etc/ssl/certs/ca-certificates.crt';
       }
       if (defined(Biber::Config->getoption('ssl-noverify-host'))) {
           $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
